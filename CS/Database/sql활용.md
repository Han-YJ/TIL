# SQL 작성

## 관계형 데이터 모델(Relation Data Model)
보편적인 데이터 모델. 계층 모델과 망 모델의 복잡한 구조를 단순화 시킨 모델
- 기본 키와 이를 참조하는 외래 키로 표현. 1:1, 1:N, N:M

## 트랜잭션(Transaction)
### 개념
데이터베이스 시스템에서 하나의 논리적 기능을 정상적으로 수행하기 위한 작업의 기본 단위
- 인가받지 않은 사용자로부터 데이터를 보장하기 위해 DBMS가 가져야 하는 특성

### 특징 (ACID)
- Atomicity(원자성) : 연산 전체가 성공 or 실패. 하나가 실패할 경우 전체가 취소되어야 함
  - Commit / Rollback
- Consistency : 트랜잭션 실행 성공 후 일관된 데이터베이스상태로 보존
  - 무결성 제약조건, 동시성 제어
- Isolation(격리성) : 실행 중 다른 트랜잭션 접그 불가
  - Read Uncommit / Read Commit / Pantom Read / Serializable
- Durability(영속성) : 성공한 트랜잭션 결과는 영속적으로 DB에 저장
  - 회복 기법


## 집합 연산자(Set Operator)
여러 질의 결과를 연결하여 하나로 결합하는 방식 => 하나의 결과 생성
- UNION : 중복 행 제거된 쿼리 결과 집합 (합집합)
- UNION ALL : 중복 행이 제거되지 않은 쿼리 결과 집합
- INTERSECT : 두 결과에 공통적으로 존재하는 집합 (교집합)
- MINUS : 첫 쿼리에 있고 두 번째 뭐리에는 없는 집합 (차집합)

## 조인(JOIN)
두 릴레이션으로부터 관련된 튜플들을 결합하여 하나의 튜플로 만드는 대표적인 데이터 연결방법
- 논리적 조인 : 사용자 SQL문에 표현되는 테이블 결합 방식 (내부 / 외부 조인)
- 물리적 조인 : DB옵티마이저에 의해 내부적으로 발생하는 테이블 결합 방식 (중첩반복 / 정렬합병 / 해시 조인)

### 논리적 조인
- 내부 조인
  - 동등(Equal) : 공통 존재 컬럼의 값이 같은 경우 추출
  - 자연(Natural) : 두 테이블의 모든 컬럼을 비교하여 같은 컬럼 명을 가진 값이 같은 경우를 추출
  - 교차(Cross) : 조인 조건이 없는 모든 데이터 조합을 추출
  
- 외부 조인
  - 왼쪽 : 왼쪽테이블의 모든 데이터와 오른쪽 테이블의 동일 데이터 추출
  - 오른쪽 : 왼쪽의 반대
  - 완전 외부(Full Outer) : 양쪽의 모든 데이터 추출

### 물리적 조인
- 중첩 반복 : 하나의집합을 기준으로 순차적으로 상대방 Row 를 결합
- 정렬 합병 : Random Access를 줄이기 위한 경우 사용. 연결고리 형태로 합병
- 해시 조인 : Hashing Function 기법을 활용하여 조인을 수행 => 특정 Partition에 모아두는 역할
  - 비용기반 옵티마이저에서만 가능, cpu 성능에 의존적

  ## 서브쿼리(Sub-Query)
  SQL문 안에 포함된 SQL문
  ### 유형
  - 동작방식 기준
    - 비연관 서브쿼리(Un-Correlated Sub-Query) : 서브쿼리가 메인쿼리의컬럼을 가지고 있지 않은 형태
    - 연관 서브쿼리(Correlated Sub-Query) : 서브쿼리가 메인쿼리의 컬럼을 가지고 있는 형태
  - 데이터형태 기준
    - 단일 행(Single Row) : 결과가 항상 1건 이하인 서브쿼리. 비교연산자 사용
    - 다중 행(Multiple Row) : IN, ALL, ANY, SOME, EXISTS 사용
    - 다중 컬럼(Multiple Column) : 결과가 여러 컬럼으로 반환되는 서브쿼리
      - 서브쿼리와 메인쿼리에서 비교하는 컬럼 개수와 위치가 동일해야 함
